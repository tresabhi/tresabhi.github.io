---
import { repeat } from "lodash-es";
import { Box, Code, Flex, Link, Text } from "@radix-ui/themes";
import { pageMaxWidth } from "../layouts/BaseLayout.astro";
import { WriterLogo } from "./WriterLogo";
import {
  FaceIcon,
  GitHubLogoIcon,
  GlobeIcon,
  LinkedInLogoIcon,
  PersonIcon,
  RocketIcon,
} from "@radix-ui/react-icons";

const coolText = "TRÃ¨SaBHi";
const coolTextCount = 4;
const heuristicHeight = 84;
---

<style>
  #navbar {
    --transition-duration: 400ms;

    transition-duration: var(--transition-duration);
    position: fixed;
    width: 100%;
    top: 0;
    background-color: var(--gray-2);
    box-shadow: var(--shadow-2);
    padding: var(--space-6) 0;
    backdrop-filter: blur(0);
  }

  #navbar[data-sticky="true"] {
    backdrop-filter: blur(4rem);
    background-color: var(--white-a8);
    box-shadow: var(--shadow-4);
    padding: var(--space-3) 0;
  }

  #navbar #logo {
    transition-duration: var(--transition-duration);
    height: 1.25rem;
    width: calc(1.25rem * (326 / 72));
  }

  #navbar[data-sticky="true"] #logo {
    height: 1rem;
    width: calc(1rem * (326 / 72));
  }

  #navbar #cool {
    user-select: none;
    transition-duration: var(--transition-duration);
    opacity: calc(1 / 23);
    transform: translate(-50%, -50%) scale(15);
    position: absolute;
    top: 50%;
    left: 50%;
    letter-spacing: var(--letter-spacing-9);
  }

  #navbar[data-sticky="true"] #cool {
    opacity: 0;
  }
</style>

<script>
  const navbar = document.getElementById("navbar") as HTMLDivElement;

  function handleScroll() {
    navbar.dataset.sticky = `${window.scrollY > navbar.clientHeight / 2}`;
  }

  handleScroll();
  document.addEventListener("scroll", handleScroll);
</script>

<Box height={`${heuristicHeight}px`} />

<Flex id="navbar" align="center" justify="center" overflow="hidden">
  <Flex
    justify="between"
    align="center"
    gap="3"
    flexGrow="1"
    maxWidth={pageMaxWidth}
    px="5"
    position="relative"
  >
    <Code id="cool" weight="bold">{repeat(coolText, coolTextCount)}</Code>

    <Link color="gray" href="/" highContrast trim="end">
      <WriterLogo id="logo" />
    </Link>

    <Flex gap="3" align="center">
      <Link
        trim="end"
        color="gray"
        highContrast
        target="_blank"
        href="https://abhi-deep.com/"
      >
        <RocketIcon width="1em" height="1em" />
      </Link>
      <Link
        trim="end"
        color="gray"
        highContrast
        target="_blank"
        href="https://github.com/tresabhi"
      >
        <GitHubLogoIcon width="1em" height="1em" />
      </Link>
      <Link
        trim="end"
        color="gray"
        highContrast
        target="_blank"
        href="https://github.com/tresabhi"
      >
        <LinkedInLogoIcon width="1em" height="1em" />
      </Link>
    </Flex>
  </Flex>
</Flex>
