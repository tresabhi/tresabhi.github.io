---
import { repeat } from "lodash-es";
import { Box, Code, Flex, Link, Text } from "@radix-ui/themes";
import { pageMaxWidth } from "../layouts/BaseLayout.astro";
import { WriterLogo } from "./WriterLogo";
import {
  FaceIcon,
  GitHubLogoIcon,
  GlobeIcon,
  LinkedInLogoIcon,
  PersonIcon,
  RocketIcon,
} from "@radix-ui/react-icons";

const coolText = "WRITER";
const coolTextCount = 4;
export const APPROXIMATE_navbarHeight = 54;
---

<style>
  #navbar {
    --transition-duration: 50ms;

    transition-duration: var(--transition-duration);
    position: fixed;
    width: 100%;
    top: 0;
    background: linear-gradient(var(--gray-1), var(--gray-3));
    box-shadow: var(--shadow-2);
    padding: var(--space-4) 0;
    backdrop-filter: blur(0);
    z-index: 1;
  }

  #navbar[data-sticky="true"] {
    backdrop-filter: blur(4rem);
    box-shadow: var(--shadow-4);
    padding: var(--space-3) 0;
  }

  #navbar #logo {
    transition-duration: var(--transition-duration);
    height: 1.25rem;
    width: calc(1.25rem * (326 / 72));
    color: var(--gray-12);
  }

  #navbar[data-sticky="true"] #logo {
    height: 1rem;
    width: calc(1rem * (326 / 72));
    color: var(--gray-11);
  }

  #navbar #cool {
    user-select: none;
    transition-duration: var(--transition-duration);
    opacity: calc(1 / 32);
    transform: translate(-50%, -50%) scale(15);
    position: absolute;
    top: 50%;
    left: 50%;
    letter-spacing: var(--letter-spacing-9);
  }

  #navbar[data-sticky="true"] #cool {
    opacity: 0;
  }

  #navbar .quick-link {
    transition-duration: var(--transition-duration);
    font-size: var(--font-size-5);
    color: var(--gray-12);
  }

  #navbar[data-sticky="true"] .quick-link {
    font-size: var(--font-size-3);
    color: var(--gray-11);
  }

  #navbar #quick-links {
    transition-duration: var(--transition-duration);
    gap: var(--space-4);
  }

  #navbar[data-sticky="true"] #quick-links {
    gap: var(--space-3);
  }
</style>

<script>
  const navbar = document.getElementById("navbar") as HTMLDivElement;

  function handleScroll() {
    navbar.dataset.sticky = `${window.scrollY > 0}`;
  }

  handleScroll();
  document.addEventListener("scroll", handleScroll);
</script>

<Box height={`${APPROXIMATE_navbarHeight}px`} />

<Flex id="navbar" align="center" justify="center" overflow="hidden">
  <Flex
    justify="between"
    align="center"
    gap="3"
    flexGrow="1"
    maxWidth={pageMaxWidth}
    px="5"
    position="relative"
  >
    <Text style={{ pointerEvents: "none" }} id="cool" weight="bold"
      >{repeat(coolText, coolTextCount)}</Text
    >

    <Link color="gray" href="/" highContrast trim="end">
      <WriterLogo id="logo" />
    </Link>

    <Flex id="quick-links" align="center">
      <Link
        className="quick-link"
        trim="end"
        color="gray"
        highContrast
        target="_blank"
        href="https://abhi-deep.com/"
      >
        <RocketIcon width="1em" height="1em" />
      </Link>
      <Link
        className="quick-link"
        trim="end"
        color="gray"
        highContrast
        target="_blank"
        href="https://github.com/tresabhi"
      >
        <GitHubLogoIcon width="1em" height="1em" />
      </Link>
      <Link
        className="quick-link"
        trim="end"
        color="gray"
        highContrast
        target="_blank"
        href="https://github.com/tresabhi"
      >
        <LinkedInLogoIcon width="1em" height="1em" />
      </Link>
    </Flex>
  </Flex>
</Flex>
